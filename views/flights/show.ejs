<%- include('../partials/header') %>

<section id="show-page">
    <div>Airline: <%= flight.airline %></div><br>
    <div>Airport: <%= flight.airport %></div><br>
    <div>Flight Number: <%= flight.flightNo %></div><br>
    <div>Departs: <%= flight.departs %></div><br>
  </section>
  
  <br><br><h2>Destination</h2>
  <form id="add-destination-form" method="POST"
    action="/flights/<%= flight._id %>/arrivals">
    <label>Airport:
        <select name = "airport">
            <option value="AUS"> AUS</option>
            <option value="DFW"> DFW</option>
            <option value="DEN"> DEN</option>
            <option value="LAX"> LAX</option>
            <option value="SAN"> SAN</option>
            <option value="PDX"> PDX</option>
        </select>
        </label><br>
        <Label>Arrival:
            <input type="datetime-local" name="arrival">
        </Label><br>
        <button type="submit">Add Destination</button>
        </form>

        <% if (flight.destinations.length) { %>
            <table>
                <thead>
                    <tr>
                        <th>Airport</th>
                        <th>Arrival</th>
                    </tr>
                </thead>
                <tbody>
                    <% flight.destinations.forEach(function(d) { %>
                        <tr>
                            <td><%= d.airport %></td>
                            <td><%= d.arrival %></td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        <% } %>
        <h2 class="section-title">Tickets</h2>
        <ul class="ticket-list">
            <% tickets.forEach(ticket => { %>
                <li class="ticket-item">
                    Seat: <%= ticket.seat %>, Price: <%= ticket.price %>
                </li>
                </ul> 
            <% }) %>  
           <a href="/flights/<%= flight._id %>/tickets/new"><button>Create a new ticket</button></a>              
  <%- include('../partials/footer') %>